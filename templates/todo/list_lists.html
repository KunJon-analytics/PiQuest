{% extends "todo/base.html" %}

{% block title %}{{ list_title }} Todo Lists{% endblock %}

{% block content %}

<div class="h-100 w-full flex items-center justify-center bg-languid-lavender font-sans">
	<div class="bg-white rounded shadow p-6 m-4 w-full lg:w-3/4 lg:max-w-lg">
        <div class="mb-4">
            <h1 class="text-grey-800 text-4xl">Todo Lists</h1>
            <p class="text-grey-800 mt-1">{{ task_count }} tasks in {{ list_count }} list{{ list_count|pluralize }}</p>
        </div>
        <div>
        {% regroup lists by group as section_list %}
        {% for group in section_list %}
          <table class="min-w-max w-full table-auto">
              <thead>
                  <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
                      <th class="py-3 px-6 text-left">Group: {{ group.grouper }}</th>
                      <th class="py-3 px-6 text-left"></th>
                  </tr>
              </thead>
              <tbody class="text-gray-600 text-sm font-light">
                {% for task in group.list %}
                  <tr class="border-b border-gray-200 hover:bg-gray-100 {% cycle '' 'bg-gray-50' %}">
                      <td class="py-3 px-6 text-left whitespace-nowrap">
                          <div class="flex items-center">
                              <span class="font-medium hover:text-myrtle-green"><a href="{% url 'todo:list_detail' task.id task.slug %}">{{ task.name }}</a></span>
                          </div>
                      </td>
                      <td class="py-3 px-6 text-center">
                          <span class="bg-myrtle-green text-white py-1 px-3 rounded-full text-xs">{{ task.task_set.count }}</span>
                      </td>
                  </tr>
                {% endfor %}
              </tbody>
          </table>
          {% endfor %}
        </div>
        <div class="mt-3">
    
          {% if user.is_staff %}
          <button
            class="inline-block px-6 py-2 text-xs font-medium leading-6 text-center text-white uppercase transition bg-myrtle-green rounded-full shadow ripple hover:shadow-lg hover:bg-myrtle-green-light focus:outline-none"
          >
            <a href="{% url 'todo:add_list' %}">Create new todo list</a>
          </button>
          {% else %}
          <button
            class="inline-block px-6 py-2 text-xs font-medium leading-6 text-center text-white uppercase transition bg-indigo-500 rounded-full shadow ripple hover:shadow-lg hover:bg-indigo-600 focus:outline-none"
          >
            <a href="{% url 'todo:mine' %}">If you were staff, you could create a new list</a>
          </button>
          {% endif %}
            
        </div>
    </div>

</div>
{% endblock %}